"use strict";gameEngine={ele:null,Enermys:{},Bullets:{},ScoretoTal:0,init:function(){return this.ele=document.getElementById("main"),this},start:function(){gameEngine.loading(function(){myPlan.init().move(),myPlan.fire(),gameEngine.ListenKey(),gameEngine.creatElemy(),gameEngine.Crash(),gameEngine.backgroundMove()})},loading:function(e){var n=document.createElement("div");n.className="logo",gameEngine.ele.appendChild(n);var t=document.createElement("div");t.className="run",gameEngine.ele.appendChild(t);var a=["images2/loading1.png","images2/loading2.png","images2/loading3.png"],i=0,o=setInterval(function(){i>=5&&(clearInterval(o),gameEngine.ele.removeChild(n),gameEngine.ele.removeChild(t),e()),t.style.background="url("+a[++i%3]+") no-repeat"},50)},creatElemy:function(){timer=setInterval(function(){Math.random()>.6&&new Enermy(Enermy.prototype.Enermy_type_Big).init().move()},1500),timer=setInterval(function(){Math.random()>.5&&new Enermy(Enermy.prototype.Enermy_type_middle).init().move()},700),timer=setInterval(function(){Math.random()>.4&&new Enermy(Enermy.prototype.Enermy_type_small).init().move()},500)},ListenKey:function(){var e=0,n=0;window.onkeydown=function(t){37==(t=t||event).keyCode&&(e=-5),38==t.keyCode&&(n=-5),39==t.keyCode&&(e=5),40==t.keyCode&&(n=5);setInterval(function(){var t=myPlan.ele.offsetLeft+e,a=myPlan.ele.offsetTop+n;t<0?t=0:t>gameEngine.ele.offsetWidth-myPlan.ele.offsetWidth&&(t=gameEngine.ele.offsetWidth-myPlan.ele.offsetWidth),a<0?a=0:a>gameEngine.ele.offsetHeight-myPlan.ele.offsetHeight&&(a=gameEngine.ele.offsetHeight-myPlan.ele.offsetHeight),myPlan.ele.style.left=t+"px",myPlan.ele.style.top=a+"px"},100)},window.onkeyup=function(){e=0,n=0}},Crash:function(){timer=setInterval(function(){for(var e in gameEngine.Bullets)for(var n in gameEngine.Enermys)isCrash(gameEngine.Bullets[e].ele,gameEngine.Enermys[n].ele)&&(gameEngine.Bullets[e].boom(),gameEngine.Enermys[n].hurt())},30);var e=!1;timer=setInterval(function(){for(var n in gameEngine.Enermys)if(!e&&isCrash(gameEngine.Enermys[n].ele,myPlan.ele)){console.log("碰撞到了我的飞机"),e=!0,myPlan.boom();var t=prompt("您的总分是"+gameEngine.ScoretoTal+",请输入大名");t?ajax({type:"post",url:"http://60.205.181.47/myPHPCode4/getRank.php",async:!0,data:{name:t,score:gameEngine.ScoretoTal},success:function(e){JSON.parse(e);location.href="paihang.html"}}):location.reload()}},30)},backgroundMove:function(){var e=0;setInterval(function(){gameEngine.ele.style.backgroundPositionY=++e+"px"},100)}};